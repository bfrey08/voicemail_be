---
http_interactions:
- request:
    method: post
    uri: https://api.lob.com/v1/letters
    body:
      encoding: UTF-8
      string: description=Test+letter&to=adr_532afe682427030f&from=adr_0ac8a5f41e60c43b&file=%0A++++++++++++++%3Chtml%3E%0A%0A%3Chead%3E%0A++%3Cmeta+charset%3D%22UTF-8%22%3E%0A++%3Clink+href%3D%22https%3A%2F%2Ffonts.googleapis.com%2Fcss%3Ffamily%3DTinos%22+rel%3D%22stylesheet%22+type%3D%22text%2Fcss%22%3E%0A++%3Ctitle%3ELetter+to+Representative%3C%2Ftitle%3E%0A++%3Cstyle%3E%0A++++*%2C%0A++++*%3Abefore%2C%0A++++*%3Aafter+%7B%0A++++++-webkit-box-sizing%3A+border-box%3B%0A++++++-moz-box-sizing%3A+border-box%3B%0A++++++box-sizing%3A+border-box%3B%0A++++%7D%0A%0A++++body+%7B%0A++++++width%3A+8.5in%3B%0A++++++height%3A+11in%3B%0A++++++margin%3A+0%3B%0A++++++padding%3A+0%3B%0A++++%7D%0A%0A++++.page+%7B%0A++++++page-break-after%3A+always%3B%0A++++++position%3A+relative%3B%0A++++++width%3A+8.5in%3B%0A++++++height%3A+11in%3B%0A++++%7D%0A%0A++++.page-content+%7B%0A++++++position%3A+absolute%3B%0A++++++width%3A+8.125in%3B%0A++++++height%3A+10.625in%3B%0A++++++left%3A+0.1875in%3B%0A++++++top%3A+0.1875in%3B%0A++++++background-color%3A+rgba%280%2C+0%2C+0%2C+0%29%3B%0A++++%7D%0A%0A++++.text+%7B%0A++++++margin-left%3A+55px%3B%0A++++++margin-right%3A+55px%3B%0A++++++margin-top%3A+300px%3B%0A++++++font-family%3A+%27Tinos%27%3B%0A++++++font-size%3A+10pt%3B%0A++++++line-height%3A+14pt%3B%0A++++%7D%0A%0A++++.red-text+%7B%0A++++++color%3A+red%3B%0A++++%7D%0A%0A++++.date+%7B%0A++++++float%3A+right%3B%0A++++%7D%0A%0A++++%23return-address-window+%7B%0A++++++position%3A+absolute%3B%0A++++++left%3A+.625in%3B%0A++++++top%3A+.5in%3B%0A++++++width%3A+3.25in%3B%0A++++++height%3A+.875in%3B%0A++++++background-color%3A+rgba%28255%2C+0%2C+0%2C+0%29%3B%0A++++%7D%0A%0A++++%23return-address-text+%7B%0A++++++position%3A+absolute%3B%0A++++++left%3A+.07in%3B%0A++++++top%3A+.34in%3B%0A++++++width%3A+2.05in%3B%0A++++++height%3A+.44in%3B%0A++++++font-size%3A+.11in%3B%0A++++%7D%0A++++%2F*+your+main+logo+should+have+dimensions+of+240x224+pixels.+*%2F%0A%0A++++%23main-logo+%7B%0A++++++position%3A+absolute%3B%0A++++++left%3A+542px%3B%0A++++++top%3A+23px%3B%0A++++++width%3A+2in%3B%0A++++++height%3A+.3in%3B%0A++++%7D%0A%0A++++%23recipient-address-window+%7B%0A++++++position%3A+absolute%3B%0A++++++left%3A+.625in%3B%0A++++++top%3A+1.7in%3B%0A++++++width%3A+4in%3B%0A++++++height%3A+1in%3B%0A++++++background-color%3A+rgba%28255%2C+0%2C+0%2C+0%29%3B%0A++++%7D%0A%0A++++%23recipient-address-text+%7B%0A++++++position%3A+absolute%3B%0A++++++left%3A+.07in%3B%0A++++++top%3A+.05in%3B%0A++++++width%3A+2.92in%3B%0A++++++height%3A+.9in%3B%0A++++%7D%0A%0A++++%23white-box+%7B%0A++++++background-color%3A+white%3B%0A++++++width%3A+3.15in%3B%0A++++++height%3A+2in%3B%0A++++++position%3A+absolute%3B%0A++++++left%3A+.6in%3B%0A++++++top%3A+.84in%3B%0A++++%7D%0A++%3C%2Fstyle%3E%0A%3C%2Fhead%3E%0A%0A%3Cbody%3E%0A++%3Cdiv+class%3D%22page%22%3E%0A++++%3Cdiv+class%3D%22page-content%22%3E%0A+++++%3C%21--+%3Cdiv+id%3D%22main-logo%22%3E%3Cimg+src%3D%22https%3A%2F%2Fs3.us-west-2.amazonaws.com%2Fpublic.lob.com%2FLob_For_Good%2Fvoter%2Baccess%2Bprogram%2B%281%29.png%22+width%3D%22240px%22%3E%3C%2Fdiv%3E+--%3E%0A++++++%3Cdiv+class%3D%22text%22%3E%0A++++++++Please+make+Grubhub+free%0A++++++%3C%2Fdiv%3E%0A%0A++++++%3C%21--+This+div+represents+a+white+box+which+will+be+printed+on+top+of+all+artwork+to+hold+address+and+barcode+information.+Any+content+provided+underneath+this+area+will+be+covered.+--%3E%0A++++++%3Cdiv+id%3D%22white-box%22%3E%3C%2Fdiv%3E%0A%0A++++++%3Cdiv+id%3D%22return-address-window%22%3E%0A++++++++%3Cdiv+id%3D%22return-address-text%22%3E%0A++++++++%3C%2Fdiv%3E%0A++++++%3C%2Fdiv%3E%0A++++++%3Cdiv+id%3D%22recipient-address-window%22%3E%0A++++++++%3Cdiv+id%3D%22recipient-address-text%22%3E%0A++++++++%3C%2Fdiv%3E%0A++++++%3C%2Fdiv%3E%0A++++%3C%2Fdiv%3E%0A%0A%3C%2Fbody%3E%0A%0A%3C%2Fhtml%3E%0A++++++++++++++&merge_variables=%7B%22name%22%3A%22Albert%22%2C%22event%22%3A%22HTML+Letter+Conference%22%7D&metadata[campaign]=HTML+1.0&color=false
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - Lob/v1 RubyBindings/5.4.6
      Lob-Version:
      - ''
      Content-Length:
      - '3920'
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Host:
      - api.lob.com
      Authorization:
      - Basic dGVzdF9jNzI3ZjMyYmFhOTdkNzg4MTE2NDFiODkyYTBkNzI2NDgwMDo=
  response:
    status:
      code: 200
      message: OK
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json; charset=utf-8
      X-Rate-Limit-Remaining:
      - '148'
      X-Rate-Limit-Limit:
      - '150'
      X-Rate-Limit-Reset:
      - '1649190898'
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Expose-Headers:
      - WWW-Authenticate,Server-Authorization
      Cache-Control:
      - no-cache
      Accept-Ranges:
      - bytes
      Date:
      - Tue, 05 Apr 2022 20:34:54 GMT
      Vary:
      - origin,accept-encoding
      Strict-Transport-Security:
      - max-age=300
      Transfer-Encoding:
      - chunked
    body:
      encoding: ASCII-8BIT
      string: |-
        {
            "id": "ltr_a0aa7e735d516b06",
            "description": "Test letter",
            "metadata": {
                "campaign": "HTML 1.0"
            },
            "to": {
                "id": "adr_532afe682427030f",
                "description": null,
                "name": "SENATOR MICHAEL BENNET",
                "company": null,
                "phone": null,
                "email": null,
                "address_line1": "2110 S BROADWAY",
                "address_line2": null,
                "address_city": "DENVER",
                "address_state": "CO",
                "address_zip": "80210-4402",
                "address_country": "UNITED STATES",
                "metadata": {},
                "date_created": "2022-04-05T20:34:53.443Z",
                "date_modified": "2022-04-05T20:34:53.443Z",
                "object": "address"
            },
            "from": {
                "id": "adr_0ac8a5f41e60c43b",
                "description": null,
                "name": "NATE BROWN",
                "company": null,
                "phone": null,
                "email": null,
                "address_line1": "515 S BROADWAY",
                "address_line2": null,
                "address_city": "DENVER",
                "address_state": "CO",
                "address_zip": "80209-4001",
                "address_country": "UNITED STATES",
                "metadata": {},
                "date_created": "2022-04-05T20:34:53.895Z",
                "date_modified": "2022-04-05T20:34:53.895Z",
                "object": "address"
            },
            "color": false,
            "double_sided": true,
            "address_placement": "top_first_page",
            "return_envelope": false,
            "perforated_page": null,
            "custom_envelope": null,
            "extra_service": null,
            "mail_type": "usps_first_class",
            "url": "https://lob-assets.com/letters/ltr_a0aa7e735d516b06.pdf?version=v1&expires=1651782894&signature=Oqcf7xmO2cR7s04yIPy_iIbmIv_L7gE_Yn1PBWvEH7NqHuxwoqT2n4qn3bbEHZsn3yBktoBLfcSBSQIV9CR_Cw",
            "merge_variables": {
                "name": "Albert",
                "event": "HTML Letter Conference"
            },
            "template_id": null,
            "template_version_id": null,
            "carrier": "USPS",
            "tracking_number": null,
            "tracking_events": [],
            "thumbnails": [
                {
                    "small": "https://lob-assets.com/letters/ltr_a0aa7e735d516b06_thumb_small_1.png?version=v1&expires=1651782894&signature=lWaiR5o76DfPqznbOKLe_c2rFEv9F8TkkPLgT0sM-V3UBOkF7Nq0AfUwtKlP1nNteh_d74-yYUVSOgAe88_PCg",
                    "medium": "https://lob-assets.com/letters/ltr_a0aa7e735d516b06_thumb_medium_1.png?version=v1&expires=1651782894&signature=6hU6Sz-RZmXLGQzBhgr0zZi4t4L4QBsr5T298mK8o9ptwQ_uNu96hT-zxynvavmPWRtZjsYZeWMKPv8-S8YCCg",
                    "large": "https://lob-assets.com/letters/ltr_a0aa7e735d516b06_thumb_large_1.png?version=v1&expires=1651782894&signature=Wl3UMGD4vuaVPOZHR8uXznrRaS5CxGCoAopt5LJMP2xX30iwIW1rnmt8cSMlwJVw-SAfZeOxl3402tXcjN7GAw"
                }
            ],
            "expected_delivery_date": "2022-04-13",
            "date_created": "2022-04-05T20:34:54.344Z",
            "date_modified": "2022-04-05T20:34:54.344Z",
            "send_date": "2022-04-05T20:39:54.330Z",
            "object": "letter"
        }
  recorded_at: Tue, 05 Apr 2022 20:34:54 GMT
- request:
    method: post
    uri: https://api.lob.com/v1/addresses
    body:
      encoding: UTF-8
      string: name=Senator+Michael+Bennet&address_line1&address_line2=&address_city&address_state=CO&address_country=US&address_zip=80210
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - Lob/v1 RubyBindings/5.4.6
      Lob-Version:
      - ''
      Content-Length:
      - '123'
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Host:
      - api.lob.com
      Authorization:
      - Basic dGVzdF9jNzI3ZjMyYmFhOTdkNzg4MTE2NDFiODkyYTBkNzI2NDgwMDo=
  response:
    status:
      code: 422
      message: Unprocessable Entity
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '126'
      Content-Type:
      - application/json; charset=utf-8
      X-Rate-Limit-Remaining:
      - '149'
      X-Rate-Limit-Limit:
      - '150'
      X-Rate-Limit-Reset:
      - '1652898138'
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Expose-Headers:
      - WWW-Authenticate,Server-Authorization
      Cache-Control:
      - no-cache
      Accept-Ranges:
      - bytes
      Date:
      - Wed, 18 May 2022 18:22:13 GMT
      Vary:
      - origin
      Strict-Transport-Security:
      - max-age=300
    body:
      encoding: UTF-8
      string: |-
        {
            "error": {
                "message": "address_line1 is required",
                "status_code": 422,
                "code": "invalid"
            }
        }
  recorded_at: Wed, 18 May 2022 18:22:13 GMT
- request:
    method: post
    uri: https://api.lob.com/v1/addresses
    body:
      encoding: UTF-8
      string: name=Senator+Michael+Bennet&address_line1&address_line2=&address_city&address_state=CO&address_country=US&address_zip=80210
    headers:
      Accept:
      - "*/*"
      User-Agent:
      - Lob/v1 RubyBindings/5.4.6
      Lob-Version:
      - ''
      Content-Length:
      - '123'
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Host:
      - api.lob.com
      Authorization:
      - Basic dGVzdF9jNzI3ZjMyYmFhOTdkNzg4MTE2NDFiODkyYTBkNzI2NDgwMDo=
  response:
    status:
      code: 422
      message: Unprocessable Entity
    headers:
      Connection:
      - keep-alive
      Content-Length:
      - '126'
      Content-Type:
      - application/json; charset=utf-8
      X-Rate-Limit-Remaining:
      - '149'
      X-Rate-Limit-Limit:
      - '150'
      X-Rate-Limit-Reset:
      - '1652898901'
      Access-Control-Allow-Credentials:
      - 'true'
      Access-Control-Expose-Headers:
      - WWW-Authenticate,Server-Authorization
      Cache-Control:
      - no-cache
      Accept-Ranges:
      - bytes
      Date:
      - Wed, 18 May 2022 18:34:56 GMT
      Vary:
      - origin
      Strict-Transport-Security:
      - max-age=300
    body:
      encoding: UTF-8
      string: |-
        {
            "error": {
                "message": "address_line1 is required",
                "status_code": 422,
                "code": "invalid"
            }
        }
  recorded_at: Wed, 18 May 2022 18:34:56 GMT
recorded_with: VCR 6.0.0
